// skills_darkpower.js

const darkPowerTree = {
    id: "dark_power",
    name: "다크파워 스킬",
    url_param: "DarkPower",
    description: "자신의 HP를 희생하여 강력한 어둠 속성 공격을 가하거나 능력을 강화하는 스킬입니다. (데이터 갱신: 20241015)",
    skills: [
        // ==================================================
        // 1차 스킬
        // ==================================================
        {
            id: "bloody_bite",
            name: "블러드 바이트",
            tier: 1,
            type: "Active",
            mp_cost: 100,
            element: "Dark", // 어둠
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 4M
        관성: 물리 / 어택기반
        
        • 계수: 1 + 스킬렙×0.1 + 0.1×레지레벨
        • 스킬상수: 100
        • 위력: O / 발도공X
        
        [효과]
        - [이 스킬의 피해량 × 스킬렙 × 0.1]%의 HP 회복
        - 회복량 상한: [플레이어Lv × 10 × (1 + 이터널나이트메어Lv × 0.1)]
        - (레지 최대렙: 10)
      `
        },
        {
            id: "sacrifice",
            name: "세크리파이스",
            tier: 1,
            type: "Active",
            mp_cost: 0, // HP 10%
            element: "Neutral", // 어택기반이지만 속성 언급 없음 (보통 무속성 or 어둠)
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 4M
        관성: 없음 / 어택기반
        
        [코스트]
        - 자신의 최대HP의 10% 소모
        - 만약 HP가 부족하다면 3초간 기절한다.
        
        • 계수: (5 + 스킬렙×1)단, 최대10
        • 스킬상수: 최대 HP의 10%
        • 위력: X / 발도공X
        
        [특징]
        - 스킬 자체 안정률값 (고정): 최대60(35 + 스킬렙×5) + [스킬렙/10] × 10 + 이터널나이트메어Lv
        - 이 스킬은 치명타 보너스를 받지 않는다. (크리티컬 데미지 적용 X)
      `
        },

        // ==================================================
        // 2차 스킬
        // ==================================================
        {
            id: "dark_stinger",
            name: "다크 스팅어",
            tier: 2,
            type: "Active",
            mp_cost: 0, // HP 10%
            element: "Dark", // 고정
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 8M
        관성: 물리 / 어택기반
        속성: 어둠(고정)
        사용 코스트: 자신의 최대HP의 10%
        
        • 계수: 1 + 스킬렙×0.3 + [HP소모량-1000] / [30 - 이터널나이트메어Lv] + 기본STR/100 + 기본VIT/100
        • 스킬상수: HP소모량(최대 1000)
        • 위력: O / 발도공X
        • 범위: 직선 8M, 가로[(1+스킬렙)/6]M
        
        [피의 갈망]
        - 스킬 사용 시, 피의 갈망 1스택 가산 (지속: 10초)
        - 최대 5중첩 / 중첩당 최대HP[-5 × 중첩]% 감소
        - 블러드 바이트로 피의 갈망 제거하고 추가 HP 회복
        - 회복 추가량: [피의 갈망 스택^2 × 100]
      `
        },
        {
            id: "demon_claw",
            name: "데몬 크로우",
            tier: 2,
            type: "Active",
            mp_cost: 400,
            element: "Dark", // 고정
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 8M
        관성: 물리 / 어택기반
        속성: 어둠(고정)
        
        • 계수: (1 + 스킬렙×0.1) × 소숫점내림(소숫점올림((100-현재HP% + 이터널나이트메어Lv)/10) × 10) × 0.833 - 1
        • 스킬상수: 40 × 스킬렙
        • 위력: O / 발도공X
        • 범위: 플레이어 중심 반경 8M
        
        [특징]
        - 이 스킬이 복수의 대상에게 피해를 입힌 경우 피해 분산 (레지스트렛: 단일 공격이 된다)
        - 피로 부여 확률: 소숫점내림(소숫점올림((100-현재HP% + 이터널나이트메어Lv)/10) × 10, 90 / (11-스킬렙))
        
        [효과]
        - 남은 HP가 10%마다 스킬 효과 발생
        - 이 스킬은 어그로가 생성되지 않는다.
        - 모든 적에게 균등한 피해를 입힙니다.
        - 각 대상의 치명타와 관성 판정을 독립적으로 계산합니다.
        - (레지 최대렙: 1)
      `
        },

        // ==================================================
        // 3차 스킬
        // ==================================================
        {
            id: "red_tear",
            name: "레드 티어",
            tier: 3,
            type: "Active",
            mp_cost: 300,
            element: "Dark", // 고정
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 4M
        관성: 마법 / 어택기반
        차지: 0.5초
        속성: 어둠(고정)
        
        • 타수: [스킬렙/2] × [1 + 이터널나이트메어Lv × 0.3]
        • 계수: 1.8 + 0.2×스킬렙
        • 스킬상수: 0
        • 위력: X / 발도공X
        • 타격 간격: 1초
        • 범위: 적 중심 반경 [소숫점 올림((스킬렙-1)/4) + 1]M
        
        [효과]
        - 이 스킬은 치명타가 발생하지 않는다.
        - 자신의 어그로 대상이 아니라면 어그로 감소
        - 자신이 어그로 대상이 된다면 출혈 5초
        - 이 스킬의 물리관통: [10 × 스킬렙]%
        
        [버프 획득]
        - 지속시간: 소숫점 올림((스킬렙-1)/2)초
        - 효과: 다크파워 스킬의 HP소모를 0으로 한다.
      `
        },
        {
            id: "regret",
            name: "리그렛",
            tier: 3,
            type: "Active", // 버프기
            mp_cost: 200,
            element: "Neutral",
            weapon: ["모든무기"],
            description: `
        [버프기 / 모든무기 사용가능]
        지속시간: [32 - 0.1×스킬의 중첩]초
        
        [효과]
        - 이 스킬의 지속시간이 끝나면 후회없이 사망한다. (이 효과로 사망 시 응급처치, 리저렉션 불가)
        - 이터널 나이트메어 중이라면 일정확률로 후회잊어진다.
        - 사용할때마다 버프효과가 중첩된다. (최대 10)
        - 사용하면 HP 100% 회복
        
        [중첩당 스탯 상승]
        - 기본HP% 감소: [-10 × 스택]%
        - ATK 상승: [소숫점내림((스킬렙+1)/2) × 스택]
        - MATK 상승: [소숫점내림((스킬렙+1)/2) × 스택]
        - 물리/마법내성% 상승: [스킬렙 × 스택]
        - 최대MP 상승: [100 × 스택]
        - 공격MP회복 상승: [스킬렙 × 스택]
      `
        },

        // ==================================================
        // 4차 스킬
        // ==================================================
        {
            id: "soul_hunt",
            name: "소울헌트",
            tier: 4,
            type: "Active",
            mp_cost: 400,
            element: "Dark", // 고정
            weapon: ["모든무기"],
            description: `
        [액티브 / 모든무기 사용가능]
        사거리: 장비한 무기 사거리
        관성: 마법 / 어택기반
        
        [스택 메커니즘]
        - HP를 소비한다면 1스택 획득 (최대 10)
        - 스킬 사용 시 MP회복: [스킬렙 × 5 × 스택]회복
        
        [소울헌트 (1차 공격)]
        • 계수: 5 + 0.5×스킬렙 + (한손검+기본STR/200), (권갑+기본AGI/200), (활,총-5), (발도+기본DEX/100)
        • 스킬상수: 100 + 30×스킬렙
        • 위력: O / 발도공X
        • 속성: 어둠(고정)
        • 범위: 플레이어 중심 반경 5M (창,대검+2M), (활,총 대상 중심으로 변환)
        
        [데스사이즈 (2차 공격 - 스택 소비)]
        • 사용 시 소울헌트 스택을 전부 사용
        • 계수: 2.5 + 0.25×스킬렙 + (0.5 + 0.05×스킬렙)×사용 스택
        • 스킬상수: 100 + 30×스킬렙
        • 위력: O / 발도공X
        • 범위: 플레이어 중심 반경 5M (창,대검+2M), (활,총 대상 중심으로 변환)
        
        [효과]
        - 대상이 공포 상태라면 반드시 크리티컬
        - 휘두르는 모션 고정 무적시간 발생 (1초)
        
        [공포 부여 확률]
        - 대검, 창 (10%)
        - 활, 총 (60%)
        - 권갑, 맨손, 한손검 (100%)
        - 지팡이, 마도구 (50%)
        - 발도 (30%)
      `
        },
        {
            id: "eternal_nightmare",
            name: "이터널 나이트메어",
            tier: 4,
            type: "Active", // 버프기
            mp_cost: 300,
            element: "Neutral",
            weapon: ["모든무기"],
            description: `
        [버프기 / 모든무기 사용가능]
        지속시간: 300초
        
        [자신 효과]
        - 기본 HP% 증가: [2 × 스킬렙]%
        - 어둠내성% 증가: 5%
        - 빛내성% 감소: -5%
        - 이 상태에선 HP 자연회복이 금지된다.
        - 2초마다 HP 100을 소비한다. (최대 HP가 1만을 넘는다면 1% 소비)
        - 만약 HP를 소비하지 못 한다면 버프가 즉시 종료된다.
        
        [적 디버프]
        - 적들의 DEF, MDEF 감소
        - 감소량: [다크파워 스킬에 투자한 스킬포인트 × (스킬렙 × 0.5)]
        - 이 스킬은 대상 방어력의 절반까지만 깎을 수 있다.
        
        [방어력 감소 특이점]
        - 입장 보스의 경우 "노말 상태"에서의 6배이기에 노말기준 방어력이 제한으로 작용합니다.
        - 예시) 적 방어력 300(노말) / 적 방어력 1800(얼티) -> 이터널 최대 감소 수치는 150으로 적용.
      `
        }
    ]
};